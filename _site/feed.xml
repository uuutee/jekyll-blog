<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>uuutee.log</title>
    <description>WEB DEVELOPMENT
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sat, 18 Mar 2017 22:02:01 +0900</pubDate>
    <lastBuildDate>Sat, 18 Mar 2017 22:02:01 +0900</lastBuildDate>
    <generator>Jekyll v3.3.1</generator>
    
      <item>
        <title>Ansibleまとめ</title>
        <description>&lt;h2 id=&quot;インストール&quot;&gt;インストール&lt;/h2&gt;

&lt;p&gt;macをクライアントとして実行する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brew install ansible
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;ansibleを実行&quot;&gt;ansibleを実行&lt;/h2&gt;

&lt;p&gt;基本&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# -i: デフォルトのhostsを使用しない場合、インベントリの指定が必要
# -a: コマンドを実行
$ ansible -i hosts aws-ec2-dev -a &quot;uname -r&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;playbook実行方法&quot;&gt;playbook実行方法&lt;/h2&gt;

&lt;p&gt;playbookを実行&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ansible-playbook -i hosts playbook.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;実行されるタスクを確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ansible-playbook -i hosts --list-tasks playbook.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;dry-run する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ansible-playbook -i hosts --check playbook.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;デバッグする&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ansible-playbook -i hosts -vvv playbook.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;インベントリの書き方&quot;&gt;インベントリの書き方&lt;/h2&gt;
&lt;p&gt;インベントリは対象ホストが記述されたファイルのこと&lt;br /&gt;
iniファイルの形式で記述する。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[web-servers]
host1
host2
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;playbookの書き方&quot;&gt;playbookの書き方&lt;/h2&gt;

&lt;h3 id=&quot;yaml-の書き方&quot;&gt;yaml の書き方&lt;/h3&gt;

&lt;p&gt;yamlで記述する&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# イコールで値を書く&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;key1=value1 key2=value2 key3=value3&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 配列&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 配列をネスト&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 
&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;- value&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# オブジェクト&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# オブジェクトをネスト&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 
&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 改行1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt; 
&lt;span class=&quot;err&quot;&gt;改&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;行&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;改&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;行&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;no&quot;&gt; 改行2&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ey: &amp;gt; &lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;改&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;行&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;改&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;行&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;例&quot;&gt;例&lt;/h3&gt;
&lt;p&gt;|  項目  |    内容    |                   説明                  |        例        |
|——–|————|—————————————–|——————|
| hosts  | group-name | インベントリ内の対象グループ名          |                  |
|        | all        | インベントリ内のすべてのhost            |                  |
| become | yes, no    | sudoして実行するかどうか                |                  |
| tasks  |            | 実行する処理一覧                        | name, include    |
| roles  | role名     | 実行するrole名。                        | httpd, webserver |
|        |            | roles内ディレクトリのplaybookを実行する |                  |&lt;/p&gt;

&lt;p&gt;タスクを実行する&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;all&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;become&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;yes&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;debug&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;msg=hello&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;roleを実行するplaybook&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;all&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;become&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;yes&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;roles&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;httpd&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mysql&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;モジュール&quot;&gt;モジュール&lt;/h2&gt;
&lt;p&gt;処理を実行する。name でtaskに名前をつけることができる&lt;/p&gt;

&lt;p&gt;デバッグ&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;debug&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;msg=hello&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;インクルードする&quot;&gt;インクルードする&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;playbook.yml&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;コマンドを実行&quot;&gt;コマンドを実行&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;confirm os name&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;uname&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;-r&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;複数行のコマンドを実行&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git clone and rbenv&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;git clone https://github.com/sstephenson/rbenv.git ~/.rbenv;&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build;&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;echo 'export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;' &amp;gt;&amp;gt; ~/.bash_profile;&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;echo 'eval &quot;$(rbenv init -)&quot;' &amp;gt;&amp;gt; ~/.bash_profile;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;ファイルを置換する&quot;&gt;ファイルを置換する&lt;/h3&gt;

&lt;p&gt;1行で書く&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;timezone を日本語に変更&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;lineinfile&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/etc/php.ini&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;regexp='^;?date.timezone&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;='&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;line='date.timezone&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Asia/Tokyo'&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;所有者やパーミッションを指定&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 
  &lt;span class=&quot;s&quot;&gt;lineinfile&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;dest=/etc/php.ini&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;regexp='^;?date.timezone ='&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;line='date.timezone = Asia/Tokyo'&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;owner=root&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;group=root&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;mode=0644&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;ファイルを作成する&quot;&gt;ファイルを作成する&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ファイルを作成する&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;path=/etc/httpd/vhosts.d/conf.d state=file owner=root group=root mode=0755&lt;/span&gt;

&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ディレクトリを作成する&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;path=/etc/httpd/vhosts.d/ state=directory owner=root group=root mode=0755&lt;/span&gt;

&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ファイルを削除する&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;path=/etc/httpd/vhosts.d/ state=absent&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;yum&quot;&gt;yum&lt;/h3&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;httpd2.4をインストール&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;yum&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name=httpd24 state=installed&lt;/span&gt;

&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;httpd2.4を削除&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;yum&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name=httpd24 state=absent&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;service&quot;&gt;service&lt;/h3&gt;
&lt;p&gt;service コマンドと同等の作業を行う&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;httpdを起動する&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name=httpd state=started&lt;/span&gt;

&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;httpdをリロード&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name=httpd state=reloaded&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;OS起動時に、起動するかどうか&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;httpdをリロード&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name=httpd enabled=yes&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;変数&quot;&gt;変数&lt;/h2&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c1&quot;&gt;# vars に変数を指定できる&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;vars&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 

  &lt;span class=&quot;c1&quot;&gt;# 別ファイルに切り出すことも可能&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;vars_files&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;vars.yml&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;定義済み変数&quot;&gt;定義済み変数&lt;/h2&gt;
&lt;p&gt;実行中のhostを取得&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;or
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;タスクの結果を変数に保存&quot;&gt;タスクの結果を変数に保存&lt;/h2&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;var test&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;pwd&quot;&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;result&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;var=result&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;結果&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ok: [aws-ec2-wp01] =&amp;gt; {
    &quot;result&quot;: {
        &quot;changed&quot;: true,
        &quot;cmd&quot;: &quot;pwd&quot;,
        &quot;delta&quot;: &quot;0:00:00.002209&quot;,
        &quot;end&quot;: &quot;2017-02-11 18:53:59.143631&quot;,
        &quot;rc&quot;: 0,
        &quot;start&quot;: &quot;2017-02-11 18:53:59.141422&quot;,
        &quot;stderr&quot;: &quot;&quot;,
        &quot;stdout&quot;: &quot;/home/ec2-user&quot;,
        &quot;stdout_lines&quot;: [
            &quot;/home/ec2-user&quot;
        ],
        &quot;warnings&quot;: []
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;条件分岐&quot;&gt;条件分岐&lt;/h2&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;s&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mysql_use_secure_installation == true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;rolesのディレクトリ構造&quot;&gt;rolesのディレクトリ構造&lt;/h2&gt;
&lt;p&gt;ディレクトリを下記の構造で作成する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/roles/
/roles/role_name/
/roles/role_name/tasks/
/roles/role_name/tasks/main.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/curious-eyes/items/9cea638fb399cdb53a25#_reference-3f732296883407f4ab1f&quot;&gt;AnsibleでWordPressサーバ構築 - Qiita&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://qiita.com/okochang/items/f264825e538dbce5dfac&quot;&gt;Ansibleのドキュメントを読んでみたメモ - Qiita&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 09 Feb 2017 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/2017/02/09/Ansible%E3%81%BE%E3%81%A8%E3%82%81.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2017/02/09/Ansible%E3%81%BE%E3%81%A8%E3%82%81.html</guid>
        
        
        <category>Linux</category>
        
      </item>
    
      <item>
        <title>AnsibleでAWS EC2にWordPress環境を構築する</title>
        <description>&lt;ul&gt;
  &lt;li&gt;WebserverはApache&lt;/li&gt;
  &lt;li&gt;mysqlはクライアントのみ使用する&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;インストール&quot;&gt;インストール&lt;/h2&gt;

&lt;p&gt;今回はmacをクライアントとして実行する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brew install ansible
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/curious-eyes/items/9cea638fb399cdb53a25#_reference-3f732296883407f4ab1f&quot;&gt;AnsibleでWordPressサーバ構築 - Qiita&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 07 Jan 2017 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/2017/01/07/Ansible%E3%81%A7AWS-EC2%E3%81%ABWordPress%E7%92%B0%E5%A2%83%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2017/01/07/Ansible%E3%81%A7AWS-EC2%E3%81%ABWordPress%E7%92%B0%E5%A2%83%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B.html</guid>
        
        
        <category>Linux</category>
        
      </item>
    
      <item>
        <title>ターミナルのショートカット</title>
        <description>&lt;p&gt;左に移動 (←)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + b
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;右に移動（→）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + f
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;行頭へ移動&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + a
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;行末へ移動&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + e
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;削除系&quot;&gt;削除系&lt;/h2&gt;

&lt;p&gt;左を削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + h
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;右を削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + d
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;左すべてを削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + u
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;右すべてを削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + k
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;履歴系&quot;&gt;履歴系&lt;/h2&gt;

&lt;p&gt;履歴（前へ）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + p
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;履歴（次へ）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + n
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;履歴を検索（遡って）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + r
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;履歴を検索（現在に）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + s
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;キャンセル&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;esc
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;その他&quot;&gt;その他&lt;/h2&gt;

&lt;p&gt;実行（Enter）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + m
ctrl + j
ctrl + o
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ログアウト&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctrl + d (何もタイプしていない状態で)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;画面をクリア（&lt;code class=&quot;highlighter-rouge&quot;&gt;clear&lt;/code&gt;と同じ）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctl + l
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/akito/items/d09a2d5b36d4cf7bac6d&quot;&gt;爆速でターミナルを使うためのショートカット集【初学者用】 - Qiita&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Thu, 15 Dec 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/mac/2016/12/15/%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%AE%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88.html</link>
        <guid isPermaLink="true">http://localhost:4000/mac/2016/12/15/%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%AE%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88.html</guid>
        
        
        <category>Mac</category>
        
      </item>
    
      <item>
        <title>chrome dev tools の Network Filter</title>
        <description>&lt;p&gt;chromeのNetwork Fileterでhttp経由のファイルだけを抽出する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scheme:http
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/y_fujieda/items/a0a69151cf7307039f74#%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0&quot;&gt;Chrome Developer Toolsでパフォーマンス計測・改善 - Qiita&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 11 Nov 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/frontend/2016/11/11/chrome-dev-tools-Network-Filter.html</link>
        <guid isPermaLink="true">http://localhost:4000/frontend/2016/11/11/chrome-dev-tools-Network-Filter.html</guid>
        
        
        <category>frontend</category>
        
      </item>
    
      <item>
        <title>ハッシュ化と暗号化</title>
        <description>&lt;ul&gt;
  &lt;li&gt;ハッシュ化
    &lt;ul&gt;
      &lt;li&gt;不可逆である&lt;/li&gt;
      &lt;li&gt;SHA1やMD5関数で行う&lt;/li&gt;
      &lt;li&gt;パスワード認証に使われる
        &lt;ul&gt;
          &lt;li&gt;DBにはハッシュ化した値を保存&lt;/li&gt;
          &lt;li&gt;パスワード入力時に値をハッシュ化して、DBのものと比較して正であることを確認する&lt;/li&gt;
          &lt;li&gt;パスワードを忘れたときは、もとの値がわからないので、再設定を促す&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;暗号化
    &lt;ul&gt;
      &lt;li&gt;可逆である&lt;/li&gt;
      &lt;li&gt;可逆なので復号ができる
        &lt;ul&gt;
          &lt;li&gt;encrypt と decrypt&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.goo.ne.jp/xmldtp/e/b6a697735a597e8e41af460ae2f2875a&quot;&gt;ハッシュ化と暗号化は違う。ハッシュ化（SHA1,MD5)すると、元には戻らない - ウィリアムのいたずらの開発日記&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://book.cakephp.org/2.0/ja/core-utility-libraries/security.html&quot;&gt;Security&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://be-hase.com/php/239/&quot;&gt;CakePHPで個人情報をDBに保存する際に、暗号化しておく話。 | be-hase.com&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Sat, 15 Oct 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/tips/2016/10/15/%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E5%8C%96%E3%81%A8%E6%9A%97%E5%8F%B7%E5%8C%96.html</link>
        <guid isPermaLink="true">http://localhost:4000/tips/2016/10/15/%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E5%8C%96%E3%81%A8%E6%9A%97%E5%8F%B7%E5%8C%96.html</guid>
        
        
        <category>tips</category>
        
      </item>
    
      <item>
        <title>shell置換まとめ sed, perl, grep</title>
        <description>&lt;h2 id=&quot;sed基本&quot;&gt;sed基本&lt;/h2&gt;

&lt;p&gt;ファイルを指定して、テキストを置換する&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sed -i -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from/to/g&quot;&lt;/span&gt; /path/to/name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;複数条件を指定する&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sed -i -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from1/to1/g&quot;&lt;/span&gt; -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from2/to2/g&quot;&lt;/span&gt; /path/to/name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;パイブで使う&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;hogefuga | sed &lt;span class=&quot;s2&quot;&gt;&quot;s/hoge//g&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;grep-して-sed-で置換する&quot;&gt;grep して sed で置換する&lt;/h2&gt;

&lt;h3 id=&quot;ファイルを上書きする場合&quot;&gt;ファイルを上書きする場合&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# linux&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;

	&lt;span class=&quot;c&quot;&gt;# mac&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;bakファイルを作成する場合&quot;&gt;.bakファイルを作成する場合&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# linux&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i.bak -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
	
	&lt;span class=&quot;c&quot;&gt;# mac&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;'.bak'&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;ポイント&quot;&gt;ポイント&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;macの場合は、&lt;code class=&quot;highlighter-rouge&quot;&gt;-i&lt;/code&gt; オプションの後に、空文字を指定しないと動作しない。&lt;/li&gt;
  &lt;li&gt;sedで置換されたファイルは、タイムスタンプが現在のものに置き換わる。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;findで検索したファイルをsedで置換する&quot;&gt;findで検索したファイルをsedで置換する&lt;/h2&gt;
&lt;p&gt;findの print と  xargs -0 オプションで空白文字を含んだファイルパスを置換できる&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# linux&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find . -type f -print0 | xargs -0 sed -i &lt;span class=&quot;s1&quot;&gt;'s/置換前/置換後/g'&lt;/span&gt;

	&lt;span class=&quot;c&quot;&gt;# mac&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find . -type f -print0 | xargs -0 sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換前/置換後/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;日本語ファイル名でうまく置換できないときはexecオプションを使用する&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;find . -type f -exec sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s2&quot;&gt;&quot;s/置換前/置換後/g&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;sed-で-特殊な文字を置換する&quot;&gt;sed で 特殊な文字を置換する&lt;/h2&gt;

&lt;p&gt;e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;'share' . DS . 'cakephp' . DS . 'current'&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# シングルクオートが含まれるので、ダブルクオートで対象文字列を囲む&lt;/span&gt;
	&lt;span class=&quot;c&quot;&gt;# `.` はエスケープする&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sed -i &lt;span class=&quot;s2&quot;&gt;&quot;s/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp2'/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'current'/g&quot;&lt;/span&gt; ./sandbox.com/contact/index.php

	&lt;span class=&quot;c&quot;&gt;# grepと組み合わせる&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s2&quot;&gt;&quot;'share' . DS . 'cakephp2'&quot;&lt;/span&gt; . | xargs sed -i &lt;span class=&quot;s2&quot;&gt;&quot;s/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp2'/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'current'/g&quot;&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s2&quot;&gt;&quot;'current' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'lib'&quot;&lt;/span&gt; . | xargs sed -i &lt;span class=&quot;s2&quot;&gt;&quot;s/'current' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'lib'/'current' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'lib'/g&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;スラッシュを含む文字の場合&quot;&gt;スラッシュを含む文字の場合&lt;/h3&gt;
&lt;p&gt;スラッシュとシングルクオートを含む置換対象にする場合、&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;文字列を　ダブルクオートで囲む&lt;/li&gt;
  &lt;li&gt;区切り文字を / から : に変更する
とうまく行った。&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;?php get_template_part('footer'); ?&amp;gt;&quot;&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s2&quot;&gt;&quot;s:&amp;lt;?php get_template_part('footer'); ?&amp;gt;:&amp;lt;?php require_once TEMPLATEPATH . '/inc/pages/footer.php'; ?&amp;gt;:g&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;特定のテキストを改行コードに置換する&quot;&gt;特定のテキストを改行コードに置換する&lt;/h3&gt;

&lt;p&gt;sedの場合、改行コードへの置換が、&lt;code class=&quot;highlighter-rouge&quot;&gt;\n&lt;/code&gt; で行えない。&lt;br /&gt;
改行コードをエスケープして実行すると改行に置換ができる&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; -p | grep PATH | sed &lt;span class=&quot;s1&quot;&gt;'s/:/\
	/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ただ、これだとターミナルで 改行を入力できないのでその場合 &lt;code class=&quot;highlighter-rouge&quot;&gt;tr&lt;/code&gt; で行う&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# trはファイルを引数に取れないのでパイプで実行する&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; -p | grep PATH | tr &lt;span class=&quot;s1&quot;&gt;':'&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'\n'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;正規表現と後方参照でuser-idだけを出力する&quot;&gt;正規表現と後方参照で、user idだけを出力する&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# \(.*\) 後方参照する&lt;/span&gt;
	&lt;span class=&quot;c&quot;&gt;# \1 後方参照を取り出す&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;id username | awk &lt;span class=&quot;s1&quot;&gt;'{print $1}'&lt;/span&gt; | sed -e &lt;span class=&quot;s1&quot;&gt;'s/^uid=\(.*\)(.*)$/\1/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# perlのconfigからサーバパスワードを取得する例&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cat /home/username/private/config.conf | grep &lt;span class=&quot;s2&quot;&gt;&quot;SERVER_PASS&quot;&lt;/span&gt; | sed -e &lt;span class=&quot;s2&quot;&gt;&quot;s/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;SERVER_PASS =&amp;gt; '&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;',/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;perlで複数行置換&quot;&gt;perlで複数行置換&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	perl -0p -i -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from/to/gm&quot;&lt;/span&gt; /path/to/file
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/HayneRyo/items/f13f36b969d0ab029553&quot;&gt;複数ファイルの文字列を一括置換 - Qiita&lt;/a&gt;
&lt;a href=&quot;http://notes.applifirst.jp/2014/06/09/43/&quot;&gt;grepとsedでファイルの内容を一括変換:Mac OS X | ゆるメモ&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://momijiame.tumblr.com/post/68363821454/sed-%E3%81%AE-s-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%8C%BA%E5%88%87%E3%82%8A%E6%96%87%E5%AD%97%E3%81%AF%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B&quot;&gt;sed の s コマンドの区切り文字は変更できる | CUBE SUGAR STORAGE&lt;/a&gt;　　
&lt;a href=&quot;http://qiita.com/takech9203/items/b96eff5773ce9d9cc9b3&quot;&gt;sedコマンドの備忘録 - Qiita&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;macのsed&quot;&gt;macのsed&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/giiko_/items/6b6ff23c707932491b6f&quot;&gt;find ~ xargs ~ sedをやろうとしたら厳しかったのでRubyを使った話 - Qiita&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;改行について&quot;&gt;改行について&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://rksz.hateblo.jp/entry/2013/03/11/085556&quot;&gt;sedコマンドで改行(LF)に変換したいと思ったら、trコマンド - RLB&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;後方参照&quot;&gt;後方参照&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://bi.biopapyrus.net/linux/sed.html&quot;&gt;sed | テキストの置換,正規表現のメタ文字や後方参照の方法など&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;perl&quot;&gt;perl&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/takc923/items/e608568a9734e2d84f7f&quot;&gt;perlのワンライナーで複数行の置換を行う - Qiita&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://qiita.com/maru3/items/d19f640d6cc7d4ea90a4&quot;&gt;Perl ワンライナーで複数行置換 - Qiita&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.perlplus.jp/regular/ini/index5.html&quot;&gt;パターンの中のエスケープ処理 - 正規表現の基本 - Perlにおける正規表現&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://qiita.com/katsukii/items/1c1550f064b4686c04d4&quot;&gt;【保存版】正規表現でエスケープが必要な文字一覧表 - Qiita&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 05 Oct 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/2016/10/05/shell%E7%BD%AE%E6%8F%9B%E3%81%BE%E3%81%A8%E3%82%81-sed,-perl,-grep.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2016/10/05/shell%E7%BD%AE%E6%8F%9B%E3%81%BE%E3%81%A8%E3%82%81-sed,-perl,-grep.html</guid>
        
        
        <category>Linux</category>
        
      </item>
    
      <item>
        <title>shell置換まとめ sed, perl, grep</title>
        <description>&lt;h2 id=&quot;基本的な使い方&quot;&gt;基本的な使い方&lt;/h2&gt;

&lt;p&gt;ファイルを指定して、テキストを置換する&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sed -i -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from/to/g&quot;&lt;/span&gt; /path/to/name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;複数条件を指定する&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sed -i -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from1/to1/g&quot;&lt;/span&gt; -e &lt;span class=&quot;s2&quot;&gt;&quot;s/from2/to2/g&quot;&lt;/span&gt; /path/to/name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;パイブで使う&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;hogefuga | sed &lt;span class=&quot;s2&quot;&gt;&quot;s/hoge//g&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;grep-して-sed-で置換する&quot;&gt;grep して sed で置換する&lt;/h2&gt;

&lt;h3 id=&quot;ファイルを上書きする場合&quot;&gt;ファイルを上書きする場合&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# linux&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;

	&lt;span class=&quot;c&quot;&gt;# mac&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;bakファイルを作成する場合&quot;&gt;.bakファイルを作成する場合&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# linux&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i.bak -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
	
	&lt;span class=&quot;c&quot;&gt;# mac&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;'.bak'&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;eg-macで-grep-して-sed-する&quot;&gt;e.g. macで grep して sed する&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;

	&lt;span class=&quot;c&quot;&gt;# どれでも動く&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -lr &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; | xargs sed -i &lt;span class=&quot;s2&quot;&gt;&quot;.bak&quot;&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -lr &lt;span class=&quot;s1&quot;&gt;'置換対象の文字列'&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s2&quot;&gt;&quot;.bak&quot;&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/置換対象の文字列/置換後の文字列/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;ポイント&quot;&gt;ポイント&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;macの場合は、&lt;code class=&quot;highlighter-rouge&quot;&gt;-i&lt;/code&gt; オプションの後に、空文字を指定しないと動作しない。&lt;/li&gt;
  &lt;li&gt;sedで置換されたファイルは、タイムスタンプが現在のものに置き換わる。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sed-で-特殊な文字を置換する&quot;&gt;sed で 特殊な文字を置換する&lt;/h2&gt;

&lt;p&gt;e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;'share' . DS . 'cakephp' . DS . 'current'&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# シングルクオートが含まれるので、ダブルクオートで対象文字列を囲む&lt;/span&gt;
	&lt;span class=&quot;c&quot;&gt;# `.` はエスケープする&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sed -i &lt;span class=&quot;s2&quot;&gt;&quot;s/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp2'/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'current'/g&quot;&lt;/span&gt; ./sandbox.com/contact/index.php

	&lt;span class=&quot;c&quot;&gt;# grepと組み合わせる&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s2&quot;&gt;&quot;'share' . DS . 'cakephp2'&quot;&lt;/span&gt; . | xargs sed -i &lt;span class=&quot;s2&quot;&gt;&quot;s/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp2'/'share' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'cakephp' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'current'/g&quot;&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s2&quot;&gt;&quot;'current' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'lib'&quot;&lt;/span&gt; . | xargs sed -i &lt;span class=&quot;s2&quot;&gt;&quot;s/'current' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'lib'/'current' &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; DS &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; 'lib'/g&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;スラッシュを含む文字の場合&quot;&gt;スラッシュを含む文字の場合&lt;/h3&gt;
&lt;p&gt;スラッシュとシングルクオートを含む置換対象にする場合、&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;文字列を　ダブルクオートで囲む&lt;/li&gt;
  &lt;li&gt;区切り文字を / から : に変更する
とうまく行った。&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;grep -rl &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;?php get_template_part('footer'); ?&amp;gt;&quot;&lt;/span&gt; ./ | xargs sed -i &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; -e &lt;span class=&quot;s2&quot;&gt;&quot;s:&amp;lt;?php get_template_part('footer'); ?&amp;gt;:&amp;lt;?php require_once TEMPLATEPATH . '/inc/pages/footer.php'; ?&amp;gt;:g&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;特定のテキストを改行コードに置換する&quot;&gt;特定のテキストを改行コードに置換する&lt;/h3&gt;

&lt;p&gt;sedの場合、改行コードへの置換が、&lt;code class=&quot;highlighter-rouge&quot;&gt;\n&lt;/code&gt; で行えない。&lt;br /&gt;
改行コードをエスケープして実行すると改行に置換ができる&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; -p | grep PATH | sed &lt;span class=&quot;s1&quot;&gt;'s/:/\
	/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ただ、これだとターミナルで 改行を入力できないのでその場合 &lt;code class=&quot;highlighter-rouge&quot;&gt;tr&lt;/code&gt; で行う&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# trはファイルを引数に取れないのでパイプで実行する&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; -p | grep PATH | tr &lt;span class=&quot;s1&quot;&gt;':'&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'\n'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;正規表現と後方参照でuser-idだけを出力する&quot;&gt;正規表現と後方参照で、user idだけを出力する&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# \(.*\) 後方参照する&lt;/span&gt;
	&lt;span class=&quot;c&quot;&gt;# \1 後方参照を取り出す&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;id username | awk &lt;span class=&quot;s1&quot;&gt;'{print $1}'&lt;/span&gt; | sed -e &lt;span class=&quot;s1&quot;&gt;'s/^uid=\(.*\)(.*)$/\1/g'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;c&quot;&gt;# perlのconfigからサーバパスワードを取得する例&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cat /home/username/private/config.conf | grep &lt;span class=&quot;s2&quot;&gt;&quot;SERVER_PASS&quot;&lt;/span&gt; | sed -e &lt;span class=&quot;s2&quot;&gt;&quot;s/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;SERVER_PASS =&amp;gt; '&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;',/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://qiita.com/HayneRyo/items/f13f36b969d0ab029553&quot;&gt;複数ファイルの文字列を一括置換 - Qiita&lt;/a&gt;
&lt;a href=&quot;http://notes.applifirst.jp/2014/06/09/43/&quot;&gt;grepとsedでファイルの内容を一括変換:Mac OS X | ゆるメモ&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://momijiame.tumblr.com/post/68363821454/sed-%E3%81%AE-s-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%8C%BA%E5%88%87%E3%82%8A%E6%96%87%E5%AD%97%E3%81%AF%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B&quot;&gt;sed の s コマンドの区切り文字は変更できる | CUBE SUGAR STORAGE&lt;/a&gt;　　
&lt;a href=&quot;http://qiita.com/takech9203/items/b96eff5773ce9d9cc9b3&quot;&gt;sedコマンドの備忘録 - Qiita&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;改行について&quot;&gt;改行について&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://rksz.hateblo.jp/entry/2013/03/11/085556&quot;&gt;sedコマンドで改行(LF)に変換したいと思ったら、trコマンド - RLB&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;後方参照&quot;&gt;後方参照&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://bi.biopapyrus.net/linux/sed.html&quot;&gt;sed | テキストの置換,正規表現のメタ文字や後方参照の方法など&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Oct 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/2016/10/05/sed%E3%81%BE%E3%81%A8%E3%82%81.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2016/10/05/sed%E3%81%BE%E3%81%A8%E3%82%81.html</guid>
        
        
        <category>Linux</category>
        
      </item>
    
      <item>
        <title>Linuxユーザ操作まとめ</title>
        <description>&lt;h2 id=&quot;ユーザ関連&quot;&gt;ユーザ関連&lt;/h2&gt;

&lt;p&gt;ユーザ情報を表示&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ id username
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ユーザの一覧を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/passwd
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ユーザを追加&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ useradd username
or
$ adduser username

# -D オプションでデフォルト値を確認
$ useradd -D
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ユーザのパスワードを変更&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ passwd username
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ユーザを削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ userdel username

# -r: ホームディレクトリ内のファイルも削除	
$ userdel -r username
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;現在のユーザ名を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ whoami
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;グループ関連&quot;&gt;グループ関連&lt;/h2&gt;

&lt;p&gt;現在のユーザのグループを確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ groups
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;グループの一覧を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/group
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;グループを追加&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ groupadd groupname
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;グループにユーザを追加&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ gpasswd -a username groupname
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;グループからユーザを削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ gpasswd -d username groupname
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;グループにユーザを追加 (usermod)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# -a グループを追加する (append)
# -G 所属するグループを指定する (global: -Gのみだと、指定したグループ以外は削除される)
$ usermod -a -G groupname username
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;参考&quot;&gt;参考&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://fujikkoooooo.hateblo.jp/entry/2015/05/01/154611&quot;&gt;【linux】 ユーザーをグループに追加する際は gpasswd -a か usermod -aG を使う方がいい - モノノフ系インフラエンジニア じーふーの備忘録&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://takuya-1st.hatenablog.jp/entry/2016/07/22/165742&quot;&gt;ユーザをグループに追加・削除する gpasswd 編 - それマグで！&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;ファイル操作関連&quot;&gt;ファイル操作関連&lt;/h2&gt;

&lt;p&gt;ファイルの所有者を変更&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ chown username filename

# グループも同時に変更
$ chown username:groupname filename

# -R 再帰的に変更
$ chown -R username:groupname dirname
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ファイルのグループを変更&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ chgrp groupname filename

# -R 再帰的に変更
$ chgrp -R groupname dirname
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;eg-ユーザ作成時のテンプレートを変更&quot;&gt;e.g. ユーザ作成時のテンプレートを変更&lt;/h2&gt;
&lt;p&gt;ユーザ作成時のhomeディレクトリに、 &lt;code class=&quot;highlighter-rouge&quot;&gt;public_html&lt;/code&gt; を作成したい。&lt;/p&gt;

&lt;p&gt;デフォルト値を確認する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ useradd -D
GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/bash
SKEL=/etc/skel
CREATE_MAIL_SPOOL=yes
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/skel&lt;/code&gt; がユーザ作成時にコピーされるので、ここに &lt;code class=&quot;highlighter-rouge&quot;&gt;public_html&lt;/code&gt; を作成する&lt;/p&gt;

&lt;h2 id=&quot;参考-1&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://takuya-1st.hatenablog.jp/entry/20101028/1288231936&quot;&gt;adduserとuseraddの違い - それマグで！&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://kazmax.zpp.jp/linux_beginner/useradd.html&quot;&gt;Linux 新規ユーザの作成 - useradd&lt;/a&gt;
&lt;a href=&quot;http://promamo.com/?p=785&quot;&gt;Linuxでよく使うコマンドのメモ -ユーザとグループ- ‹ 技術の犬小屋&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Sat, 17 Sep 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/2016/09/17/Linux-%E3%83%A6%E3%83%BC%E3%82%B6%E6%93%8D%E4%BD%9C%E3%81%BE%E3%81%A8%E3%82%81.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2016/09/17/Linux-%E3%83%A6%E3%83%BC%E3%82%B6%E6%93%8D%E4%BD%9C%E3%81%BE%E3%81%A8%E3%82%81.html</guid>
        
        
        <category>Linux</category>
        
      </item>
    
      <item>
        <title>yum, rpmまとめ</title>
        <description>&lt;h2 id=&quot;yumとrpm&quot;&gt;yumとrpm&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;yum
    &lt;ul&gt;
      &lt;li&gt;簡単に言うと &lt;code class=&quot;highlighter-rouge&quot;&gt;rpm&lt;/code&gt; をより便利に使えるようにしたもの&lt;/li&gt;
      &lt;li&gt;パッケージの依存関係も解決してくれる&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;rpm
    &lt;ul&gt;
      &lt;li&gt;パッケージの依存関係も解決されない&lt;/li&gt;
      &lt;li&gt;リポジトリの追加は&lt;code class=&quot;highlighter-rouge&quot;&gt;rpm&lt;/code&gt;しかできない&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;基本的には &lt;code class=&quot;highlighter-rouge&quot;&gt;yum&lt;/code&gt; を使用して、&lt;code class=&quot;highlighter-rouge&quot;&gt;yum&lt;/code&gt; で解決できない場合に &lt;code class=&quot;highlighter-rouge&quot;&gt;rpm&lt;/code&gt; を使用するようにする&lt;/p&gt;

&lt;h2 id=&quot;yum&quot;&gt;yum&lt;/h2&gt;

&lt;h3 id=&quot;確認系&quot;&gt;確認系&lt;/h3&gt;

&lt;p&gt;リポジトリのパッケージを検索&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum search パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;利用可能なパッケージの一覧（未インストールも含む）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum list パッケージ名

# grepで部分一致フィルタ
$ yum list | grep パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;利用可能なパッケージの一覧（インストール済みのみ）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum list installed パッケージ名

# grepで部分一致フィルタ
$ yum list installed | grep パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;パッケージの詳細情報を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum info パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;アップデート&quot;&gt;アップデート&lt;/h3&gt;

&lt;p&gt;更新のあるパッケージをアップデートする&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum update
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;インストール&quot;&gt;インストール&lt;/h3&gt;

&lt;p&gt;パッケージをインストール&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum install パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;複数パッケージをインストールする&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum install パッケージ名1 パッケージ名2
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;確認をスキップ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# -y: すべてyes
$ yum install -y パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;アンインストール&quot;&gt;アンインストール&lt;/h3&gt;

&lt;p&gt;パッケージを削除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum remove パッケージ名
or
$ yum erase パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;履歴系&quot;&gt;履歴系&lt;/h3&gt;

&lt;p&gt;トランザクションIDは &lt;code class=&quot;highlighter-rouge&quot;&gt;yum history&lt;/code&gt; から確認する　　&lt;/p&gt;

&lt;p&gt;実行履歴を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 実行したトランザクションIDや日時の履歴を確認できる
$ yum history
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;履歴の詳細を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum history で確認したトランザクションIDを指定
$ yum history info トランザクションID
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;履歴からパッケージを検索&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum history package-list package-name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;実行履歴を元に戻す&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum history undo トランザクションID
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;実行履歴から再実行する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum history redo トランザクションID
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;指定したIDの状態に戻る&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum history rollback トランザクションID
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;eg-インストール履歴をundoしてみる&quot;&gt;e.g. インストール履歴をundoしてみる&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ yum history
47 | EC2 ... &amp;lt;ec2-user&amp;gt;       | 2017-02-03 22:00 | Install        |    3

$ yum history undo 47
# 削除の確認をされる
Remove  3 Packages
Installed size: 885 k
Is this ok [y/N]: y

# 実行後確認すると削除の履歴が追加される
$ yum history
48 | EC2 ... &amp;lt;ec2-user&amp;gt;       | 2017-02-03 22:00 | Erase          |    3
47 | EC2 ... &amp;lt;ec2-user&amp;gt;       | 2017-02-03 22:00 | Install        |    3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;リポジトリ関連&quot;&gt;リポジトリ関連&lt;/h3&gt;

&lt;p&gt;現在使用しているリポジトリを確認する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# リポジトリリストの確認
$ yum repolist all
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;コマンド単位で特定のリポジトリを有効無効にする&quot;&gt;コマンド単位で特定のリポジトリを有効・無効にする&lt;/h4&gt;

&lt;p&gt;install, search, info など各オプションで使用可能&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 有効
$ yum install パッケージ名 --enablerepo=remi,epel

# 無効
$ yum install パッケージ名 --disablerepo=remi,epel
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;デフォルトでリポジトリを使用しないようにする&quot;&gt;デフォルトでリポジトリを使用しないようにする。&lt;/h4&gt;

&lt;p&gt;リポジトリの設定情報は &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/yum.repos.d/&lt;/code&gt; ディレクトリに格納されている。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# epelの場合
$ vi /etc/yum.repos.d/epel.repo

enabled=1
↓
enabled=0

# 一括で置換するなら sedでも可
$ sed -i 's/enabled=1/enabled=0/g' /etc/yum.repos.d/epel.repo
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;rpm&quot;&gt;rpm&lt;/h2&gt;

&lt;h3 id=&quot;リポジトリ関連-1&quot;&gt;リポジトリ関連&lt;/h3&gt;

&lt;p&gt;リポジトリを追加する&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rpm -ivh http://exapmle.com/example.rpm
or
$ rpm -Uvh http://exapmle.com/example.rpm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-ivh&lt;/code&gt; と &lt;code class=&quot;highlighter-rouge&quot;&gt;-Uvh&lt;/code&gt; オプションがあり、&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt; は、インストール、 &lt;code class=&quot;highlighter-rouge&quot;&gt;U&lt;/code&gt; はアップグレード。
新規と更新で使い分けるか、&lt;code class=&quot;highlighter-rouge&quot;&gt;U&lt;/code&gt; でも新規インストールは可能なので、 &lt;code class=&quot;highlighter-rouge&quot;&gt;-Uvh&lt;/code&gt; を使用してもよい。&lt;/p&gt;

&lt;h3 id=&quot;パッケージ関連&quot;&gt;パッケージ関連&lt;/h3&gt;

&lt;p&gt;パッケージのインストール先を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# インストール先のファイルを確認できる
$ rpm -ql パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ファイルを指定して、どのパッケージでインストールされたかを確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rpm -qf /path/to/file
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;パッケージの依存関係を確認&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rpm -qR パッケージ名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;使用例&quot;&gt;使用例&lt;/h2&gt;

&lt;h3 id=&quot;eg-epelリポジトリを削除して再インストール&quot;&gt;e.g. epelリポジトリを削除して再インストール&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# テストオプションでエラーが表示されないか確認
$ rpm -e --test epel-release-6-8.noarch

# 削除する
$ rpm -e epel-release-6-8.noarch
警告: /etc/yum.repos.d/epel.repo は /etc/yum.repos.d/epel.repo.rpmsave として保存されました。

# 再度インストール
$ rpm -ivh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;eg-remiリポジトリを追加する&quot;&gt;e.g. remiリポジトリを追加する&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 追加する
$ rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm

# remi-safe が有効になっている
remi-safe                                      Safe Remi's RPM repository for Enterprise Linux 6 - x86_64                                          有効:   825
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.inouetakuya.info/entry/20111006/1317900802&quot;&gt;初心者の頃に知っておきたかった rpm と yum の違いと使い分け - 彼女からは、おいちゃんと呼ばれています&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.itmedia.co.jp/help/tips/linux/l0052.html&quot;&gt;RPMコマンドを使いこなしたい - ITmedia エンタープライズ&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://qiita.com/bezeklik/items/9766003c19f9664602fe&quot;&gt;yumリポジトリ一追加リスト 完全版 - Qiita&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://d.hatena.ne.jp/muupan/20130311/1362939424&quot;&gt;yumでインストールしたパッケージのインストール場所を調べる - 学生時代に頑張ったことが何もない&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://dev.classmethod.jp/server-side/rpm-reverse-search/&quot;&gt;個人的によく使うrpmコマンド逆引き ｜ Developers.IO&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 16 Sep 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/2016/09/16/yum,-rpm%E3%81%BE%E3%81%A8%E3%82%81.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2016/09/16/yum,-rpm%E3%81%BE%E3%81%A8%E3%82%81.html</guid>
        
        
        <category>Linux</category>
        
      </item>
    
      <item>
        <title>topコマンドの使い方</title>
        <description>&lt;h2 id=&quot;起動オプション&quot;&gt;起動オプション&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# CPU使用率順にソート
$ top          

# メモリ使用率順にソート
$ top -a
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;top実行中のコマンド&quot;&gt;top実行中のコマンド&lt;/h2&gt;

&lt;p&gt;ヘルプを表示&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;h
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;インターバルを設定（デフォルトは 3sec）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;d, s
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ソートするフィールドを切り替え&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;, &amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ソートのASC DESC を切り替え&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;R
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;メモリでソート&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;M
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;特定ユーザーのプロセスのみ表示&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;u
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;終了&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;q
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;フィルタする&quot;&gt;フィルタする&lt;/h2&gt;

&lt;p&gt;一応 grep でフィルタもできる&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# -b バッチモードで起動
# -c コマンドのパスを表示
$ top -bc | grep 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;macの場合&quot;&gt;macの場合&lt;/h2&gt;
&lt;p&gt;-a オプションや、実行中のMオプションが有効にならない。
ソートする項目を指定する場合は、 &lt;code class=&quot;highlighter-rouge&quot;&gt;-o mem&lt;/code&gt; オプションを起動時に指定するか&lt;br /&gt;
実行中に &lt;code class=&quot;highlighter-rouge&quot;&gt;o&lt;/code&gt; でソートする項目を指定する&lt;/p&gt;

&lt;p&gt;昇順、降順
oオプションに + か - のsuffixを付けることで昇順降順を指定できる。&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;o +mem&lt;/code&gt; でメモリ使用量の昇順、 &lt;code class=&quot;highlighter-rouge&quot;&gt;o -mem&lt;/code&gt; でメモリ使用量の昇順&lt;/p&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://kuwalab.hatenablog.jp/entry/20110124/p1&quot;&gt;TOPコマンドを使いこなしてTOPを狙う。 - コンピュータクワガタ&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Thu, 15 Sep 2016 00:00:00 +0900</pubDate>
        <link>http://localhost:4000/linux/mac/2016/09/15/top%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/mac/2016/09/15/top%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9.html</guid>
        
        
        <category>Linux</category>
        
        <category>Mac</category>
        
      </item>
    
  </channel>
</rss>
